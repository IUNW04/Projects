<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <title>PLAYTOPIA!</title>
    <link rel="stylesheet" type="text/css" href="buyingproducts.css">
  
</head>
<body>

  
    <h1>
      <span class="playinred">Play</span>
      <span class="topiainblue">Topia!</span>
    </h1>
    <nav>
      <ul>
        <li><a href="https://w1892819.users.ecs.westminster.ac.uk/webdevcw/playtopiamainpage.html" >Home</a></li>
        <li><a href="https://w1892819.users.ecs.westminster.ac.uk/webdevcw/Comments.html">Comments</a></li>
        <li><a href="https://w1910647.users.ecs.westminster.ac.uk/webdevcw/buyingproducts.html" class="active">Shop</a></li>
        <li><a href="https://w1887168.users.ecs.westminster.ac.uk/WebDev/Quiz.html">Quiz</a></li>
        <li><a href="https://w1887168.users.ecs.westminster.ac.uk/WebDev/student-details.html">Student details</a></li>
      </ul>
    </nav>
  
    <h2>PlayTopia's Shop</h2>
   
    
    
    <div class="Playtopias-games">
      <div class="fifa-23">
        <img src="https://www.giantbomb.com/a/uploads/scale_small/0/1992/3391975-1241238642-f23-g.jpg" alt="fifa 23" style="width:90px;height:120px;">
        <p>FIFA 23</p>
        <p class="price">£60</p>
        <select name="product1" class="consoleselection" required>
            <option value="">SELECT PLATFORM</option>
            <option value="PS5">PS5</option>
           <option value="XBOXSERIESX"> XBOX SERIES X</option>
            <option value="NINTENDO-SWITCH">NINTENDO SWITCH</option>
            <option value="PC">PC</option>
        </select>
        <label for="quantity"></label>
          <select name="quantity" class="quantityselection" required>
            <option value="1"> QNTY 1</option>
            <option value="2">QNTY 2</option>
            <option value="3">QNTY 3</option>
            <option value="4">QNTY 4</option>
            <option value="5">QNTY 5</option>
          </select>
          <br>
        <br>
        <button type="button" class="addtocart">Add to Cart</button> 
        <div class="product-details">
          <h3>FIFA 23 (3+)</h3>
          <p>an opportunity to live your dreams of putting together the ideal team. Imagine having access to the best athletes in the world to put up a squad that wins every match they participate in.
            The game provides a framework for assembling a team that fits your vision with access to a sizable roster of real-life players. 
            Using the game's many customization options, you may alter your team's logo, stadium, and outfit. With FIFA 23, you can put together your perfect team, manage them over a campaign's highs and lows, and compete against other players online to determine who is the greatest.</p>
        </div>
      
    </div>
  
    
    <div class="GTA-5">
      <img src="https://hips.hearstapps.com/digitalspyuk.cdnds.net/13/14/gaming-gta5-cover.jpeg?resize=480:*" alt="GTA 5" style="width:90px;height:120px ;">
      <p>Grand Theft Auto V</p>
      <p class="price">£35</p>
      <select name="product1" class="consoleselection" required>
        <option value="">SELECT PLATFORM</option>
        <option value="PS5">PS5</option>
        <option value="XBOXSERIESX"> XBOX SERIES X</option>
        <option value="NINTENDO-SWITCH">NINTENDO SWITCH</option>
        <option value="PC">PC</option>
      </select>
      <label for="quantity"></label>
          <select name="quantity" class="quantityselection" required>
            <option value="1">QNTY 1</option>
            <option value="2">QNTY 2</option>
            <option value="3">QNTY 3</option>
            <option value="4">QNTY 4</option>
            <option value="5">QNTY 5</option>
          </select>
          <br>
      <br>
      <button type="button" class="addtocart">Add to Cart</button>
      <div class="modified-product-details">
        <h3>Grand Theft Auto V (18+)</h3>
        <p>Explore the vast metropolis of Los Santos and its surroundings as you assume control of one of three playable characters who are navigating the criminal underground in search of respect, money, and power. You'll have infinite options for mayhem and mischief with a vast open environment to explore, including automobile chases, heists, and rooftop shootouts. Additionally, every explosion, crash, and bullet hit is more exhilarating and realistic than ever before because to the improved visuals and physics of the next-generation consoles..
          
         </p>
      </div>
  </div>
  
    <div class="CODMW2">
      <img src="https://cdn.europosters.eu/image/1300/posters/call-of-duty-modern-warfare-2-task-force-i149551.jpg" alt="CODMW2" style="width:90px;height:120px;">
      <p>Call Of Duty MW 2</p>
      <p class="price">£60</p>
      <select name="product1" class="consoleselection" required>
        <option value="">SELECT PLATFORM</option>
        <option value="PS5">PS5</option>
        <option value="XBOXSERIESX"> XBOX SERIES X</option>
        <option value="NINTENDO-SWITCH">NINTENDO SWITCH</option>
        <option value="PC">PC</option>
      </select>
      <label for="quantity"></label>
          <select name="quantity" class="quantityselection" required>
            <option value="1">QNTY 1</option>
            <option value="2">QNTY 2</option>
            <option value="3">QNTY 3</option>
            <option value="4">QNTY 4</option>
            <option value="5">QNTY 5</option>
          </select>
          <br>
      <br>
      <button type="button" class="addtocart">Add to Cart</button>
      <div class="modified-product-details">
        <h3>Call Of Duty Modern Warfare 2 (18+)</h3>
        <p>You'll engage in heart-pounding firefights, from close-quarters warfare to long-range sniper duels, with an array of cutting-edge weaponry at your disposal. Team up with friends or random players to engage in violent combat in a number of game types, including as Team Deathmatch and Capture the Flag, thanks to the game's comprehensive online multiplayer option. Develop your talents, personalise your loadout, and become the soldier weapon possible.
          
         </p>
      </div>
      <div class="spiderman-MM">
        <img src="https://image.api.playstation.com/vulcan/ap/rnd/202008/1020/PRfYtTZQsuj3ALrBXGL8MjAH.jpg" alt="spiderman-MM" style="width:90px;height:120px;">
        <p>Spiderman Miles Morales</p>
        <p class="price">£35</p>
        <select name="product1" class="consoleselection" required>
          <option value="">SELECT PLATFORM</option>
          <option value="PS5">PS5</option>
          <option value="XBOXSERIESX"> XBOX SERIES X</option>
          <option value="NINTENDO-SWITCH">NINTENDO SWITCH</option>
          <option value="PC">PC</option>
        </select>
        <label for="quantity"></label>
          <select name="quantity" class="quantityselection" required>
            <option value="1">QNTY 1</option>
            <option value="2">QNTY 2</option>
            <option value="3">QNTY 3</option>
            <option value="4">QNTY 4</option>
            <option value="5">QNTY 5</option>
          </select>
          <br>
        <br>
        <button type="button" class="addtocart">Add to Cart</button>
        <div class="modified-product-details">
          <h3>Spider-Man: Miles Morales (16+)</h3>
          <p>Teenager Miles Morales is adjusting to his new home while following in the footsteps of his mentor, Peter Parker, as a new Spider-Man in the most recent adventure set in the Marvel's Spider-Man world.But the aspiring hero learns that with tremendous power comes also come enormous responsibility when a violent power struggle threatens to ruin his new home. Miles must assume the role of Spider-Man and own it in order to preserve the entirety of Marvel's New York. Witness Miles Morales' ascent as he acquires amazing, explosive new abilities to become his own Spider-Man.
            
           </p>
        </div>
        <div class="Street-Fighter-6">
          <img src="https://upload.wikimedia.org/wikipedia/en/thumb/9/94/Street_Fighter_6_box_art.jpg/220px-Street_Fighter_6_box_art.jpg" alt="street fighter 6" style="width:90px;height:120px;">
          <p>Street Fighter 6</p>
          <p class="price">£70</p>
          <select name="product1" class="consoleselection" required>
            <option value="">SELECT PLATFORM</option>
            <option value="PS5">PS5</option>
            <option value="XBOXSERIESX"> XBOX SERIES X</option>
            <option value="NINTENDO-SWITCH">NINTENDO SWITCH</option>
            <option value="PC">PC</option>
          </select>
          <br>
          <label for="quantity"></label>
          <select name="quantity" class="quantityselection" required>
            <option value="1">QNTY 1</option>
            <option value="2">QNTY 2</option>
            <option value="3">QNTY 3</option>
            <option value="4">QNTY 4</option>
            <option value="5">QNTY 5</option>
          </select>
          <br>
          <button type="button" class="addtocart">Add to Cart</button>
          <div class="modified-product-details">
            <h3>Street Fighter 6 (12+) (PRE-ORDER)</h3>
            <p> a brand-new age of fighting games begins! Fighting games have evolved beyond their typical Fighting Ground format, and now we're flipping the genre with World Tour and Battle Hub for a total of three playable game modes.
              Nobody has a perfect start in life. Step by step and punch by punch, you arrive.
              Accept the challenge and raise your level of play.
              
             </p>
          </div>

</div>
    
 
    </div>
    <div id="cart">
        <h4>Cart</h4>
        
        
         
      
        <table>
            <thead>
                <tr>
                  
        
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>Game Version</th>
                    <th class="quantity">Quantity</th>

                </tr>
            </thead>
            <tbody>
            </tbody>
            <tfoot>
                <tr>
                    
                    <td id="cart-total">£0.00</td>
                </tr>
                <form>
            
                  <label for="name">Name:</label>
                  <input type="text" id="name" name="name" required>
                  <label for="email">Email:</label>
                  <input type="email" id="email" name="email" required>
                  <label for="express-delivery">
                    <input type="checkbox" id="express-delivery" name="express-delivery">
                    express-delivery
                  </label>
                  
                      
              
                  
              </form>
            </tfoot>
        </table>
        <a href="https://w1910647.users.ecs.westminster.ac.uk/webdevcw/checkout.html">
            <button class="checkout" disabled>Checkout</button>

          </a>
          
    </div>
   
    <script>
// variables and arrays to store product information and cart data
const cart = [];
const productBtns = document.querySelectorAll('.addtocart');
const consoleSelections = document.querySelectorAll('.consoleselection');
consoleSelections.forEach(select => select.style.display = 'block');

const cartTableBody = document.querySelector('#cart tbody');
const cartTotal = document.querySelector('#cart-total'); // Add missing query selector

// Disabling the checkout button by default
const checkoutBtn = document.querySelector('.checkout');
checkoutBtn.disabled = true;

// Looping through all the product buttons to add click event listeners
for (let i = 0; i < productBtns.length; i++) {
    productBtns[i].addEventListener('click', function() {
        const product = this.parentNode;
        const productName = product.getElementsByTagName('p')[0].textContent;
        const productPrice = product.getElementsByClassName('price')[0].textContent;
        const consoleSelection = product.getElementsByClassName('consoleselection')[0].value;
        const quantitySelection = product.querySelector('select[name="quantity"]').value;
        if (consoleSelection === "") {
            alert("Please select a platform.");
            return;
        }

        // Check if the product already exists in the cart
        const existingCartItem = cart.find(item => item.name === productName && item.console === consoleSelection);
    if (existingCartItem) {
        existingCartItem.quantity += parseInt(quantitySelection); // Update the quantity of the existing item
    } else {
        const cartItem = {name: productName, price: productPrice, console: consoleSelection, quantity: parseInt(quantitySelection)};
        cart.push(cartItem);
    }

        // Update the cart 
        cartTableBody.innerHTML = '';
        for (let i = 0; i < cart.length; i++) {
            const row = cartTableBody.insertRow(-1);
            const nameCell = row.insertCell(0);
            const priceCell = row.insertCell(1);
            const consoleCell = row.insertCell(2);
            const quantityCell = row.insertCell(3);
            nameCell.textContent = cart[i].name;
            priceCell.textContent = cart[i].price;
            consoleCell.textContent = cart[i].console;
            quantityCell.textContent = cart[i].quantity;
        }

        cartTotal.textContent = `Total: £${getTotal()}`; // Add the total price of items in the cart

        // Enable the checkout button
        checkoutBtn.disabled = false;
    });
}

// Function to calculate total price of items in the cart
function getTotal() {
    let total = 0;
    for (let i = 0; i < cart.length; i++) {
        total += parseFloat(cart[i].price.replace('£', '')) * cart[i].quantity;
    }
    return total.toFixed(2);
}

// Add event listener to checkout button to show checkout form
checkoutBtn.addEventListener('click', function(event) {
    event.preventDefault(); // prevent default behavior of button click
    if (cart.length === 0) {
        alert("Your cart is empty. Please add items before checking out.");
        return;
    }
    // Redirect to checkout.html
    window.location.href = "https://w1910647.users.ecs.westminster.ac.uk/webdevcw/checkout.html";
});




  </script>
 
</body>
</html>